{"version":3,"sources":["webpack:///./src/views/Essay.vue","webpack:///./src/views/Essay.vue?ce9d","webpack:///./src/views/Essay.vue?4388","webpack:///./node_modules/core-js/modules/es.string.match.js"],"names":["class","id","to","title","name","showContent","essayContent","scrollToTop","showSub","src","iframeSrc","frameborder","scrolling","isInPeekBox","showPeekBox","eventClientX","eventClientY","boxContent","refContent","width","height","smallWindow","window","matchMedia","data","timer","components","PeekBox","watch","$route","from","this","fetchEssay","params","essayName","addClickListener","highlightCode","updateTitle","showSubForm","mounted","beforeUnmount","removeClickListener","methods","setTimeout","els","$el","getElementsByTagName","forEach","el","addEventListener","handleClick","getElementsByClassName","handleOverRefLink","handleLeaveRefLink","removeEventListener","configure","tabReplace","languages","block","highlightBlock","document","getElementById","scrollIntoView","behavior","innerText","event","matches","clientX","clientY","refLink","target","refId","getAttribute","split","ref","innerHTML","replace","clearTimeout","path","a","get","then","res","catch","err","console","log","scrollToElement","inline","classList","add","remove","href","match","preventDefault","filterClickEvent","$router","push","tagName","parentNode","altKey","ctrlKey","metaKey","shiftKey","button","defaultPrevented","undefined","linkTarget","test","url","URL","pathname","render","fixRegExpWellKnownSymbolLogic","anObject","toLength","requireObjectCoercible","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","matcher","call","RegExp","String","done","value","rx","S","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr"],"mappings":"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","file":"js/essay.a6dfd457.js","sourcesContent":["<template>\n  <div class=\"h-full essay\">\n    <teleport to=\"head\">\n      <title>{{ title }}</title>\n    </teleport>\n    <transition name=\"loadEssay\">\n      <div\n        v-if=\"showContent\"\n        id=\"essay-content\"\n        v-html=\"essayContent\"\n        v-katex\n      ></div>\n    </transition>\n    <transition name=\"loadEssay\">\n      <div id=\"toTop\" class=\"mb-8\" v-if=\"showContent\">\n        <button title=\"Go to top\" class=\"block w-8 mx-auto text-3xl\" @click=\"scrollToTop\">▲</button>\n      </div>\n    </transition>\n    <transition name=\"loadSub\">\n      <iframe\n        v-if=\"showSub\"\n        class=\"container w-5/6 p-4 mx-auto mb-8 bg-white border-t border-gray-100 shadow-xl h-72 dark:shadow-3lg-dark sm:h-96 rounded-3xl bg-opacity-80\"\n        :src=\"iframeSrc\"\n        frameborder=\"0\"\n        scrolling=\"no\"\n        @load=\"showSub = true\"\n      ></iframe>\n    </transition>\n    <div class=\"h-8\"></div>\n    <PeekBox\n      @overPeekBox=\"isInPeekBox = true\"\n      @leavePeekBox=\"\n        isInPeekBox = false;\n        handleLeaveRefLink();\n      \"\n      :showPeekBox=\"showPeekBox\"\n      :eventClientX=\"eventClientX\"\n      :eventClientY=\"eventClientY\"\n      :isInPeekBox=\"isInPeekBox\"\n      :boxContent=\"refContent\"\n      :width=\"18\"\n      :height=\"8\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from \"vue-class-component\";\nimport axios from \"axios\";\nimport PeekBox from \"@/components/PeekBox.vue\";\nimport hljs from \"highlight.js\";\n\nconst smallWindow = window.matchMedia(\"(max-width: 640px)\");\n\n@Options({\n  data() {\n    return {\n      title: \"透明盒子计划·文章\",\n      iframeSrc: \"\",\n      essayContent: \"\",\n      showContent: false,\n      showSub: false,\n      refContent: \"\",\n      showPeekBox: false,\n      isInPeekBox: false,\n      timer: \"\",\n      eventClientX: 0,\n      eventClientY: 0\n    };\n  },\n  components: {\n    PeekBox\n  },\n  watch: {\n    $route(to, from) {\n      this.showContent = false;\n      this.showSub = false;\n      if (to.name !== \"Essays\") return;\n      this.fetchEssay(to.params.essayName);\n      this.addClickListener();\n      this.scrollToTop();\n      this.highlightCode();\n      this.updateTitle();\n      this.showSubForm();\n    }\n  },\n  mounted() {\n    this.fetchEssay(this.$route.params.essayName);\n    this.addClickListener();\n    this.scrollToTop();\n    this.highlightCode();\n    this.updateTitle();\n    this.showSubForm();\n  },\n  beforeUnmount() {\n    this.removeClickListener();\n  },\n  methods: {\n    showSubForm() {\n      this.iframeSrc = \"https://clearbox.substack.com/embed\";\n      setTimeout(() => {\n        this.showSub = true;\n      }, 800);\n    },\n    addClickListener() {\n      setTimeout(() => {\n        let els = this.$el.getElementsByTagName(\"a\");\n        els.forEach(el => el.addEventListener(\"click\", this.handleClick));\n\n        els = this.$el.getElementsByClassName(\"footnote-ref\");\n        els.forEach(el => {\n          el.addEventListener(\"mouseenter\", this.handleOverRefLink);\n          el.addEventListener(\"mouseleave\", this.handleLeaveRefLink);\n        });\n      }, 600);\n    },\n    removeClickListener() {\n      let els = this.$el.getElementsByTagName(\"a\");\n      els.forEach(el => el.removeEventListener(\"click\", this.handleClick));\n\n      els = this.$el.getElementsByClassName(\"footnote-ref\");\n      els.forEach(el => {\n        el.removeEventListener(\"mouseenter\", this.handleOverRefLink);\n        el.removeEventListener(\"mouseleave\", this.handleLeaveRefLink);\n      });\n    },\n    highlightCode() {\n      hljs.configure({\n        tabReplace: \"  \",\n        languages: [\"javascript\", \"python\", \"ruby\", \"swift\", \"c\"]\n      });\n      setTimeout(() => {\n        this.$el.getElementsByTagName(\"code\").forEach(block => {\n          hljs.highlightBlock(block);\n        });\n      }, 600);\n    },\n    scrollToTop() {\n      setTimeout(() => {\n        document.getElementById(\"app\")?.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\"\n        });\n      }, 100);\n    },\n    updateTitle() {\n      setTimeout(() => {\n        const el = this.$el.getElementsByClassName(\"note-title\")[0];\n        if (el) {\n          this.title = `透明盒子计划「${el.innerText}」`;\n        } else {\n          this.title = \"透明盒子计划·文章\";\n        }\n      }, 600);\n    },\n    handleOverRefLink(event) {\n      if (smallWindow.matches) return;\n      this.timer = setTimeout(() => {\n        this.eventClientX = event.clientX;\n        this.eventClientY = event.clientY;\n\n        const refLink = event.target.getElementsByTagName(\"a\")[0];\n        const refId = refLink.getAttribute(\"href\").split(\"#\")[1];\n        const ref = document.getElementById(refId);\n        if (ref) {\n          this.refContent = ref.innerHTML.replace(\"↩\", \"\");\n          this.showPeekBox = true;\n        }\n      }, 1000);\n    },\n    handleLeaveRefLink(event) {\n      if (smallWindow.matches) return;\n      clearTimeout(this.timer);\n      setTimeout(() => {\n        if (!this.isInPeekBox) this.showPeekBox = false;\n      }, 200);\n    },\n    fetchEssay(path: string) {\n      axios\n        .get(`/notes/essays/${path}`)\n        .then(res => {\n          this.essayContent = res.data;\n          this.showContent = true;\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    scrollToElement(el) {\n      if (el) {\n        el.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\",\n          inline: \"center\"\n        });\n        el.classList.add(\"highlight\");\n        setTimeout(() => {\n          el.classList.remove(\"highlight\");\n        }, 5000);\n      }\n    },\n    handleClick(event) {\n      const { target } = event;\n      const href = target.getAttribute(\"href\");\n      if (href.match(/^#fn-\\d+$/) || href.match(/^#fnref-\\d+$/)) {\n        event.preventDefault();\n        const el = document.getElementById(href.split(\"#\")[1]);\n        this.scrollToElement(el);\n        return;\n      }\n      const to = this.filterClickEvent(event);\n      if (to) {\n        event.preventDefault();\n        this.removeClickListener();\n        this.showSub = false;\n        this.showContent = false;\n        this.$router.push({\n          path: to\n        });\n      }\n    },\n    filterClickEvent(event) {\n      // ensure we use the link, in case the click has been received by a subelement\n      let { target } = event;\n      while (target && target.tagName !== \"A\") target = target.parentNode;\n      // handle only links that occur inside the component and do not reference external resources\n      if (\n        target &&\n        target.matches(\"#essay-content a:not([href*='://'])\") &&\n        target.href\n      ) {\n        // some sanity checks taken from vue-router:\n        // https://github.com/vuejs/vue-router/blob/dev/src/components/link.js#L106\n        const {\n          altKey,\n          ctrlKey,\n          metaKey,\n          shiftKey,\n          button,\n          defaultPrevented\n        } = event;\n        // don't handle with control keys\n        if (metaKey || altKey || ctrlKey || shiftKey) return false;\n        // don't handle when preventDefault called\n        // if (defaultPrevented) return\n        // don't handle right clicks\n        if (button !== undefined && button !== 0) return false;\n        // don't handle if `target=\"_blank\"`\n        if (target && target.getAttribute) {\n          const linkTarget = target.getAttribute(\"target\");\n          if (/\\b_blank\\b/i.test(linkTarget)) return false;\n        }\n        // don't handle same page links/anchors\n        const url = new URL(target.href);\n        const to = url.pathname.split(\"/\")[1];\n        if (event.preventDefault) {\n          return to;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n})\nexport default class Essay extends Vue {}\n</script>\n","\nimport { Options, Vue } from \"vue-class-component\";\nimport axios from \"axios\";\nimport PeekBox from \"@/components/PeekBox.vue\";\nimport hljs from \"highlight.js\";\n\nconst smallWindow = window.matchMedia(\"(max-width: 640px)\");\n\n@Options({\n  data() {\n    return {\n      title: \"透明盒子计划·文章\",\n      iframeSrc: \"\",\n      essayContent: \"\",\n      showContent: false,\n      showSub: false,\n      refContent: \"\",\n      showPeekBox: false,\n      isInPeekBox: false,\n      timer: \"\",\n      eventClientX: 0,\n      eventClientY: 0\n    };\n  },\n  components: {\n    PeekBox\n  },\n  watch: {\n    $route(to, from) {\n      this.showContent = false;\n      this.showSub = false;\n      if (to.name !== \"Essays\") return;\n      this.fetchEssay(to.params.essayName);\n      this.addClickListener();\n      this.scrollToTop();\n      this.highlightCode();\n      this.updateTitle();\n      this.showSubForm();\n    }\n  },\n  mounted() {\n    this.fetchEssay(this.$route.params.essayName);\n    this.addClickListener();\n    this.scrollToTop();\n    this.highlightCode();\n    this.updateTitle();\n    this.showSubForm();\n  },\n  beforeUnmount() {\n    this.removeClickListener();\n  },\n  methods: {\n    showSubForm() {\n      this.iframeSrc = \"https://clearbox.substack.com/embed\";\n      setTimeout(() => {\n        this.showSub = true;\n      }, 800);\n    },\n    addClickListener() {\n      setTimeout(() => {\n        let els = this.$el.getElementsByTagName(\"a\");\n        els.forEach(el => el.addEventListener(\"click\", this.handleClick));\n\n        els = this.$el.getElementsByClassName(\"footnote-ref\");\n        els.forEach(el => {\n          el.addEventListener(\"mouseenter\", this.handleOverRefLink);\n          el.addEventListener(\"mouseleave\", this.handleLeaveRefLink);\n        });\n      }, 600);\n    },\n    removeClickListener() {\n      let els = this.$el.getElementsByTagName(\"a\");\n      els.forEach(el => el.removeEventListener(\"click\", this.handleClick));\n\n      els = this.$el.getElementsByClassName(\"footnote-ref\");\n      els.forEach(el => {\n        el.removeEventListener(\"mouseenter\", this.handleOverRefLink);\n        el.removeEventListener(\"mouseleave\", this.handleLeaveRefLink);\n      });\n    },\n    highlightCode() {\n      hljs.configure({\n        tabReplace: \"  \",\n        languages: [\"javascript\", \"python\", \"ruby\", \"swift\", \"c\"]\n      });\n      setTimeout(() => {\n        this.$el.getElementsByTagName(\"code\").forEach(block => {\n          hljs.highlightBlock(block);\n        });\n      }, 600);\n    },\n    scrollToTop() {\n      setTimeout(() => {\n        document.getElementById(\"app\")?.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\"\n        });\n      }, 100);\n    },\n    updateTitle() {\n      setTimeout(() => {\n        const el = this.$el.getElementsByClassName(\"note-title\")[0];\n        if (el) {\n          this.title = `透明盒子计划「${el.innerText}」`;\n        } else {\n          this.title = \"透明盒子计划·文章\";\n        }\n      }, 600);\n    },\n    handleOverRefLink(event) {\n      if (smallWindow.matches) return;\n      this.timer = setTimeout(() => {\n        this.eventClientX = event.clientX;\n        this.eventClientY = event.clientY;\n\n        const refLink = event.target.getElementsByTagName(\"a\")[0];\n        const refId = refLink.getAttribute(\"href\").split(\"#\")[1];\n        const ref = document.getElementById(refId);\n        if (ref) {\n          this.refContent = ref.innerHTML.replace(\"↩\", \"\");\n          this.showPeekBox = true;\n        }\n      }, 1000);\n    },\n    handleLeaveRefLink(event) {\n      if (smallWindow.matches) return;\n      clearTimeout(this.timer);\n      setTimeout(() => {\n        if (!this.isInPeekBox) this.showPeekBox = false;\n      }, 200);\n    },\n    fetchEssay(path: string) {\n      axios\n        .get(`/notes/essays/${path}`)\n        .then(res => {\n          this.essayContent = res.data;\n          this.showContent = true;\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    scrollToElement(el) {\n      if (el) {\n        el.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\",\n          inline: \"center\"\n        });\n        el.classList.add(\"highlight\");\n        setTimeout(() => {\n          el.classList.remove(\"highlight\");\n        }, 5000);\n      }\n    },\n    handleClick(event) {\n      const { target } = event;\n      const href = target.getAttribute(\"href\");\n      if (href.match(/^#fn-\\d+$/) || href.match(/^#fnref-\\d+$/)) {\n        event.preventDefault();\n        const el = document.getElementById(href.split(\"#\")[1]);\n        this.scrollToElement(el);\n        return;\n      }\n      const to = this.filterClickEvent(event);\n      if (to) {\n        event.preventDefault();\n        this.removeClickListener();\n        this.showSub = false;\n        this.showContent = false;\n        this.$router.push({\n          path: to\n        });\n      }\n    },\n    filterClickEvent(event) {\n      // ensure we use the link, in case the click has been received by a subelement\n      let { target } = event;\n      while (target && target.tagName !== \"A\") target = target.parentNode;\n      // handle only links that occur inside the component and do not reference external resources\n      if (\n        target &&\n        target.matches(\"#essay-content a:not([href*='://'])\") &&\n        target.href\n      ) {\n        // some sanity checks taken from vue-router:\n        // https://github.com/vuejs/vue-router/blob/dev/src/components/link.js#L106\n        const {\n          altKey,\n          ctrlKey,\n          metaKey,\n          shiftKey,\n          button,\n          defaultPrevented\n        } = event;\n        // don't handle with control keys\n        if (metaKey || altKey || ctrlKey || shiftKey) return false;\n        // don't handle when preventDefault called\n        // if (defaultPrevented) return\n        // don't handle right clicks\n        if (button !== undefined && button !== 0) return false;\n        // don't handle if `target=\"_blank\"`\n        if (target && target.getAttribute) {\n          const linkTarget = target.getAttribute(\"target\");\n          if (/\\b_blank\\b/i.test(linkTarget)) return false;\n        }\n        // don't handle same page links/anchors\n        const url = new URL(target.href);\n        const to = url.pathname.split(\"/\")[1];\n        if (event.preventDefault) {\n          return to;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n})\nexport default class Essay extends Vue {}\n","import { render } from \"./Essay.vue?vue&type=template&id=016a2091\"\nimport script from \"./Essay.vue?vue&type=script&lang=ts\"\nexport * from \"./Essay.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n"],"sourceRoot":""}